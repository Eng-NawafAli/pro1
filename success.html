<!DOCTYPE html>
<html dir="rtl" lang="ar">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ØªÙ… Ø§Ù„Ù†Ø¬Ø§Ø­ | Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø­Ø±ÙŠØ¶Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Noto Sans Arabic', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-50 flex items-center justify-center min-h-screen p-6">
    <div class="bg-white p-10 rounded-[3rem] shadow-2xl max-w-md w-full text-center space-y-8">
        <div class="text-6xl">ğŸ‰</div>
        <h1 class="text-3xl font-black text-indigo-900">Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ!</h1>
        <p class="text-gray-600 leading-relaxed">ØªÙ…Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­. Ø³Ù†Ù‚ÙˆÙ… Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø­Ø¬Ø²Ùƒ Ø§Ù„Ø¢Ù† ÙˆØ¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„Ù€ QR Ø§Ù„Ø®Ø§Øµ
            Ø¨Ùƒ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù‚Ø±ÙŠØ¨Ø§Ù‹.</p>

        <div class="p-6 bg-indigo-50 rounded-2xl border border-indigo-100 italic text-sm text-indigo-700">
            "Ù†Ø±Ø§Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ ÙÙŠ Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ø±ÙŠØ¶Ø©!"
        </div>

        <a href="index.html"
            class="block w-full bg-indigo-600 text-white py-4 rounded-xl font-bold shadow-lg shadow-indigo-200">Ø§Ù„Ø¹ÙˆØ¯Ø©
            Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    </div>

    <script>
        // Automatic status update if the redirect includes success info
        const SUPABASE_URL = 'https://ycknumkbdltbdkhmeyqp.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlja251bWtiZGx0YmRraG1leXFwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMTk3MTAsImV4cCI6MjA4NjY5NTcxMH0.BNCTfaqsul1LkDbG0PyOd63rYZCThUjGxAhgNMnda6w';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        const urlParams = new URLSearchParams(window.location.search);
        const qrId = urlParams.get('qr');
        const status = urlParams.get('status');

        async function updateStatus() {
            if (qrId && status === 'paid') {
                await supabaseClient
                    .from('bookings')
                    .update({ status: 'paid' })
                    .eq('qr_code_id', qrId);
            }
        }
        updateStatus();
    </script>
</body>

</html>